(() => {
var exports = {};
exports.id = 6457;
exports.ids = [6457];
exports.modules = {

/***/ 18038:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react");

/***/ }),

/***/ 98704:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-dom/server-rendering-stub");

/***/ }),

/***/ 97897:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react-server-dom-webpack/client");

/***/ }),

/***/ 56786:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/react/jsx-runtime");

/***/ }),

/***/ 5868:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/app-render");

/***/ }),

/***/ 41844:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/get-segment-param");

/***/ }),

/***/ 96624:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/helpers/interception-routes");

/***/ }),

/***/ 75281:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/future/route-modules/route-module");

/***/ }),

/***/ 57085:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/app-router-context");

/***/ }),

/***/ 20199:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hash");

/***/ }),

/***/ 39569:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/hooks-client-context");

/***/ }),

/***/ 17160:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router-context");

/***/ }),

/***/ 30893:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/add-path-prefix");

/***/ }),

/***/ 12336:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/format-url");

/***/ }),

/***/ 17887:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/handle-smooth-scroll");

/***/ }),

/***/ 98735:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-bot");

/***/ }),

/***/ 60120:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/is-local-url");

/***/ }),

/***/ 68231:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/parse-path");

/***/ }),

/***/ 53750:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/remove-trailing-slash");

/***/ }),

/***/ 70982:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/resolve-href");

/***/ }),

/***/ 79618:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/server-inserted-html");

/***/ }),

/***/ 78423:
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/utils");

/***/ }),

/***/ 39491:
/***/ ((module) => {

"use strict";
module.exports = require("assert");

/***/ }),

/***/ 82361:
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ 57147:
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ 13685:
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ 95687:
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ 22037:
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ 71017:
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ 12781:
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ 76224:
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ 57310:
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ 73837:
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ 59796:
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ 16551:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   GlobalError: () => (/* reexport safe */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__.GlobalError),
/* harmony export */   __next_app__: () => (/* binding */ __next_app__),
/* harmony export */   originalPathname: () => (/* binding */ originalPathname),
/* harmony export */   pages: () => (/* binding */ pages),
/* harmony export */   routeModule: () => (/* binding */ routeModule),
/* harmony export */   tree: () => (/* binding */ tree)
/* harmony export */ });
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(7262);
/* harmony import */ var next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(31823);
/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(12502);
/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__);
/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};
/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__) if(["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_2__[__WEBPACK_IMPORT_KEY__]
/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);

    

    const tree = {
        children: [
        '',
        {
        children: [
        '(dashboard)',
        {
        children: [
        '(route)',
        {
        children: [
        'customer',
        {
        children: [
        'category',
        {
        children: [
        'otherservices',
        {
        children: [
        'Airtime',
        {
        children: ['__PAGE__', {}, {
          page: [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 23209)), "C:\\wamp64\\www\\plenty\\plenti-web\\app\\(dashboard)\\(route)\\customer\\category\\otherservices\\Airtime\\page.tsx"],
          
        }]
      },
        {
          
          
        }
      ]
      },
        {
          
          
        }
      ]
      },
        {
          
          
        }
      ]
      },
        {
          'layout': [() => Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 16424)), "C:\\wamp64\\www\\plenty\\plenti-web\\app\\(dashboard)\\(route)\\customer\\layout.tsx"],
          
        }
      ]
      },
        {
          
          
        }
      ]
      },
        {
          
          metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 57481))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
        }
      ]
      },
        {
          
          metadata: {
    icon: [(async (props) => (await Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 57481))).default(props))],
    apple: [],
    openGraph: [],
    twitter: [],
    manifest: undefined
  }
        }
      ]
      }.children;
    const pages = ["C:\\wamp64\\www\\plenty\\plenti-web\\app\\(dashboard)\\(route)\\customer\\category\\otherservices\\Airtime\\page.tsx"];

    

    const originalPathname = "/(dashboard)/(route)/customer/category/otherservices/Airtime/page"
    const __next_app__ = {
      require: __webpack_require__,
      // all modules are in the entry chunk, so we never actually need to load chunks in webpack
      loadChunk: () => Promise.resolve()
    }

    

    // Create and export the route module that will be consumed.
    const options = {"definition":{"kind":"APP_PAGE","page":"/(dashboard)/(route)/customer/category/otherservices/Airtime/page","pathname":"/customer/category/otherservices/Airtime","bundlePath":"app/(dashboard)/(route)/customer/category/otherservices/Airtime/page","filename":"","appPaths":[]}}
    const routeModule = new (next_dist_server_future_route_modules_app_page_module__WEBPACK_IMPORTED_MODULE_0___default())({
      ...options,
      userland: {
        loaderTree: tree,
      },
    })
  

/***/ }),

/***/ 97401:
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

Promise.resolve(/* import() eager */).then(__webpack_require__.bind(__webpack_require__, 63753))

/***/ }),

/***/ 63753:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
// ESM COMPAT FLAG
__webpack_require__.r(__webpack_exports__);

// EXPORTS
__webpack_require__.d(__webpack_exports__, {
  "default": () => (/* binding */ page)
});

// EXTERNAL MODULE: external "next/dist/compiled/react/jsx-runtime"
var jsx_runtime_ = __webpack_require__(56786);
// EXTERNAL MODULE: external "next/dist/compiled/react"
var react_ = __webpack_require__(18038);
// EXTERNAL MODULE: ./app/(dashboard)/(route)/customer/_constants/customerData.js
var customerData = __webpack_require__(62972);
// EXTERNAL MODULE: ./public/customerImages/index.js + 41 modules
var customerImages = __webpack_require__(31978);
// EXTERNAL MODULE: ./app/hooks/usepostRequest.ts
var usepostRequest = __webpack_require__(26280);
// EXTERNAL MODULE: ./node_modules/sweetalert2/dist/sweetalert2.all.js
var sweetalert2_all = __webpack_require__(99322);
var sweetalert2_all_default = /*#__PURE__*/__webpack_require__.n(sweetalert2_all);
// EXTERNAL MODULE: ./app/(dashboard)/_components/loading.tsx
var loading = __webpack_require__(41463);
// EXTERNAL MODULE: ./app/hooks/useFetch.ts
var useFetch = __webpack_require__(90664);
;// CONCATENATED MODULE: ./app/(dashboard)/(route)/customer/_components/Airtime.tsx








const options = [
    {
        name: "mtn",
        imgSrc: customerImages/* mtn */.St
    },
    {
        name: "airtel",
        imgSrc: customerImages/* airtel */.CF
    },
    {
        name: "glo",
        imgSrc: customerImages/* glo */.js
    },
    {
        name: "9mobile",
        imgSrc: customerImages/* etisalat */.hE
    }
];
// const fetchAirtimeOperators = async (): Promise<AirtimeOperator[]> => {
//   const response = await axios.get(
//     "https://admin.plenti.africa/api/v1/user/bills/airtime-operators",
//     {
//       headers: {
//         Authorization: `Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9.eyJhdWQiOiI3IiwianRpIjoiYzQ2NDcyMDBmMWNhYTEyOTVjNmE1YWZlODA4MzJlMTdjNWZmMGU3ZTMzZGUzNTI2NjA3OGU5MmFlMzAzYzUwNjljYjUyMThmOTI2ZjNiN2QiLCJpYXQiOjE3MDA1NjUyMDUsIm5iZiI6MTcwMDU2NTIwNSwiZXhwIjoxNzMyMTg3NjA1LCJzdWIiOiIxMDQ0OSIsInNjb3BlcyI6W119.Qu7npoF72PWnw3Qz0apGTd5W7XQxTo4DiI02hcVkMubq6K7d1vfl9fOPVSxNLBtLzFV7Rnrd2VYIEsRUom67i45VKxZfGzUzz6NApZkirwA2Q4Gx-hz-nZ6nXABRuW36vvnYXRRqmMqK03R3pnOI3R6aq5fvK033gv6Kmx0TwWtconP3eyIjTviSVD3TGjZYYhDyFZaJPNW8aG5qDz0BJooFZowS28aiMlBisufHJhKlv9w-c7575b5PG0jRBMTQsHHSOLd5wVRGfzfloMI96VDo5auGfRR8PDUvhP76aN0ZPuDZaaOoJqSDBHQ-cAkyQeGOHjHCGSvhiWsiyrf6rebw-7zyWHP6YdXGOqbooQAfYMwf7H-dxLfcES9mitWPt7P2KR2a8lIvPcCubtS8SqU3fKgXttA4HMhuhGZbE_dYpcuqGJJKxOmZL4JGyJUM6m6VA8NeI1ELKxGUY4lGAWTIpztu_IRLviuam8_ecHBwYY2ZPf2xzHrlad_x0kg-axUvvlmrg9je4y0FuftCyBVQlvwEhfTSjAp44jlUiSW29UymHhJABWDo5-Kkn8tNjXbZnppuXaFUL-bLTL7uPRimlL0_U8Jew99yEzik3WrW5pRyU8swM816J4gQKf_jzHn7EjV5vjQ6Welloqgub-PhxTNWhf8HN9fDDCqPLBs`,
//       },
//     }
//   );
//   return response.data.data;
// };
const Airtime = ()=>{
    const [selectedNetwork, setSelectedNetwork] = (0,react_.useState)(null);
    const [isDropdownOpen, setDropdownOpen] = (0,react_.useState)(false);
    const [amount, setAmount] = (0,react_.useState)("");
    const [mobile, setMobile] = (0,react_.useState)("");
    const [paymentCode, setPaymentCode] = (0,react_.useState)("");
    const [brandAmounts, setBrandAmounts] = (0,react_.useState)([]);
    const [selectedBrandAmountId, setSelectedBrandAmountId] = (0,react_.useState)(null);
    const url = process.env.NEXT_PUBLIC_BASE_URL;
    const postRequest = (0,usepostRequest/* default */.Z)();
    const { data: packages, isLoading } = (0,useFetch/* useFetchDataPlans */.u)("https://admin.plenti.africa/api/v1/user/bills/airtime-operators");
    (0,react_.useEffect)(()=>{
        if (packages) {
            const newBrandAmounts = packages?.map((packageItem)=>({
                    id: packageItem.id,
                    price: packageItem.amount.toString(),
                    points: packageItem.operator.trim()
                }));
            setBrandAmounts(newBrandAmounts);
        }
    }, [
        packages
    ]);
    const payload = {
        amount: parseInt(amount),
        network: selectedNetwork?.name.toUpperCase(),
        paymentcode: paymentCode,
        mobile: mobile,
        reward: 1
    };
    const toggleDropdown = ()=>setDropdownOpen(!isDropdownOpen);
    const determineNetwork = (mobileNumber)=>{
        const prefix = mobileNumber.substring(0, 4);
        if ([
            "0703",
            "0706",
            "0803",
            "0806",
            "0810",
            "0813",
            "0816",
            "0814",
            "0903",
            "0906",
            "0913",
            "0916"
        ].includes(prefix)) {
            return options.find((o)=>o.name === "mtn") || null;
        } else if ([
            "0815",
            "0811",
            "0805",
            "0807",
            "0705",
            "0905",
            "0915"
        ].includes(prefix)) {
            return options.find((o)=>o.name === "glo") || null;
        } else if ([
            "0701",
            "0708",
            "0812",
            "0802",
            "0808",
            "0902",
            "0901",
            "0904",
            "0907",
            "0912"
        ].includes(prefix)) {
            return options.find((o)=>o.name === "airtel") || null;
        } else if ([
            "0809",
            "0818",
            "0817",
            "0909",
            "0908"
        ].includes(prefix)) {
            return options.find((o)=>o.name === "9mobile") || null;
        }
        return null;
    };
    (0,react_.useEffect)(()=>{
        const network = determineNetwork(mobile);
        setSelectedNetwork(network);
    }, [
        mobile
    ]);
    (0,react_.useEffect)(()=>{
        if (!selectedNetwork) return;
        const matchedOperator = packages?.find((o)=>o.operator.trim().toUpperCase() === selectedNetwork.name.toUpperCase() && o.amount.toString() === amount.toString());
        if (matchedOperator) {
            setPaymentCode(matchedOperator.payment_code.trim());
        }
    }, [
        selectedNetwork,
        amount,
        packages
    ]);
    const handleAmountClick = (brandAmountId)=>{
        const selectedBrandAmount = brandAmounts.find((ba)=>ba.id === brandAmountId);
        if (selectedBrandAmount) {
            setAmount(selectedBrandAmount.price);
            setSelectedBrandAmountId(brandAmountId);
        }
    };
    const selectNetwork = (option)=>{
        setSelectedNetwork(option);
        setDropdownOpen(false);
    };
    const { mutate, isError, error, isPending } = postRequest(`${url}/user/bills/buy-airtime`, (responseData)=>{
        sweetalert2_all_default().fire({
            title: "Success!",
            text: `Airtime purchase of ${amount} was successful.`,
            icon: "success",
            showClass: {
                popup: `
            animate__animated
            animate__fadeInUp
            animate__faster
          `
            },
            hideClass: {
                popup: `
            animate__animated
            animate__fadeOutDown
            animate__faster
          `
            }
        });
    }, (error)=>{
        sweetalert2_all_default().fire({
            icon: "error",
            title: "Oops...",
            text: error
        });
        console.error(error.message);
    });
    const handleSubmit = async (event)=>{
        event.preventDefault();
        if (!selectedNetwork || !amount || !mobile) {
            alert("Please fill in all fields");
            return;
        }
        mutate(payload);
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            isPending && /*#__PURE__*/ jsx_runtime_.jsx(loading/* default */.Z, {}),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                children: [
                    "Your recent top-up",
                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                        className: "grid grid-cols-4 gap-4 place-items-center my-[1rem] ",
                        children: customerData/* recentTopUp */.t6.map((recent, index)=>{
                            return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: "my-[1rem] ",
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("img", {
                                        src: recent.brand.src,
                                        className: "md:h-[80px] md:w-[80px] w-[60px] h-[60px] rounded-full",
                                        alt: ""
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                        className: "my-[1rem] max-md:text-[12px]",
                                        children: recent.num
                                    })
                                ]
                            }, index);
                        })
                    }),
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("section", {
                        children: [
                            /*#__PURE__*/ jsx_runtime_.jsx("h2", {
                                children: "Select an amount to top up "
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("figure", {
                                className: "grid grid-cols-4",
                                children: brandAmounts.slice(0, 8).map((brandAmount, index)=>{
                                    const isSelected = brandAmount.id === selectedBrandAmountId;
                                    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                        className: `bg-[#F8F8F8] rounded-lg m-[1rem] max-md:w-[68px] place-items-center flex items-center justify-center flex-col md:py-[2.5rem] p-[0.5rem] md:p-[1.5rem] cursor-pointer ${isSelected ? "border-2 border-blue-500" : ""}`,
                                        onClick: ()=>handleAmountClick(brandAmount.id),
                                        children: [
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("h2", {
                                                className: "text-[#626060] font-bold md:text-2xl",
                                                children: [
                                                    " ",
                                                    "â‚¦",
                                                    brandAmount.price
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                                className: "text-[#ED4249] max-md:text-[10px] font-bold",
                                                children: [
                                                    " ",
                                                    brandAmount.points
                                                ]
                                            })
                                        ]
                                    }, index);
                                })
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                className: "p-[1.5rem]",
                                children: [
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("figure", {
                                        className: "md:flex items-center justify-center gap-5 mb-[1rem]",
                                        children: [
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                className: "form-control w-full ",
                                                children: [
                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                                        className: "label",
                                                        children: [
                                                            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                                                className: "label-text",
                                                                children: "Amount"
                                                            }),
                                                            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                                                className: "label-text-alt text-[#ED4249]",
                                                                children: "100 points"
                                                            })
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                        type: "text",
                                                        placeholder: "Type here",
                                                        value: amount,
                                                        className: "input input-bordered w-full bg-[#F3F3F3] text-[#A09F9F] ",
                                                        onChange: (e)=>setAmount(e.target.value)
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                className: "form-control w-full ",
                                                children: [
                                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                                        className: "label",
                                                        children: [
                                                            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                                                className: "label-text",
                                                                children: "Phone number"
                                                            }),
                                                            /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                                                className: "label-text-alt text-[#ED4249]",
                                                                children: "100 points"
                                                            })
                                                        ]
                                                    }),
                                                    /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                                        type: "text",
                                                        placeholder: "Type here",
                                                        value: mobile,
                                                        className: "input input-bordered bg-[#F3F3F3] w-full text-[#A09F9F]",
                                                        onChange: (e)=>setMobile(e.target.value)
                                                    })
                                                ]
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                        className: " relative inline-flex rounded-md bg-[#F3F3F3] w-full px-[1rem] cursor-pointer",
                                        onClick: toggleDropdown,
                                        children: [
                                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                                className: "w-full rounded-l-md px-4 py-2",
                                                children: [
                                                    " ",
                                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                                        children: selectedNetwork ? selectedNetwork.name : "Network"
                                                    })
                                                ]
                                            }),
                                            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                                className: "relative",
                                                children: /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                                    type: "button",
                                                    className: " text-gray-600hover:text-gray-700 inline-flex h-full items-center justify-center rounded-r-md border-1 border-gray-10 ",
                                                    children: /*#__PURE__*/ jsx_runtime_.jsx("svg", {
                                                        className: "fill-current h-4 w-4",
                                                        xmlns: "http://www.w3.org/2000/svg",
                                                        viewBox: "0 0 20 20",
                                                        children: /*#__PURE__*/ jsx_runtime_.jsx("path", {
                                                            d: "M5.516 7.548c0.436-0.446 1.045-0.481 1.576 0l3.908 3.747 3.908-3.747c0.531-0.481 1.141-0.446 1.576 0 0.436 0.445 0.408 1.197 0 1.615l-4.695 4.502c-0.217 0.223-0.502 0.335-0.788 0.335s-0.571-0.112-0.788-0.335l-4.695-4.502c-0.408-0.418-0.436-1.17 0-1.615z"
                                                        })
                                                    })
                                                })
                                            })
                                        ]
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("div", {
                                        className: " relative inline-flex rounded-md bg-[#F3F3F3] w-full  my-[0.5rem]",
                                        children: isDropdownOpen && /*#__PURE__*/ jsx_runtime_.jsx("ul", {
                                            className: " z-10 w-full border mt-1 p-[1rem] rounded-md",
                                            children: options.map((option)=>/*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                                                    className: "flex items-center px-4 py-2 hover:bg-[#A09F9F] rouned-md cursor-pointer",
                                                    onClick: ()=>selectNetwork(option),
                                                    children: [
                                                        /*#__PURE__*/ jsx_runtime_.jsx("img", {
                                                            src: option.imgSrc.src,
                                                            alt: option.name,
                                                            className: "h-6 w-6 mr-2"
                                                        }),
                                                        /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                                            children: option.name
                                                        })
                                                    ]
                                                }, option.name))
                                        })
                                    })
                                ]
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("button", {
                                onClick: handleSubmit,
                                className: "bg-red-600 max-md:w-full max-md:mb-[4rem] rounded-full md:mx-4 px-4 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600",
                                children: "Submit"
                            })
                        ]
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const _components_Airtime = (Airtime);

// EXTERNAL MODULE: ./node_modules/antd/lib/select/index.js
var lib_select = __webpack_require__(13214);
// EXTERNAL MODULE: ./node_modules/@tanstack/react-query/build/modern/useQuery.js + 6 modules
var useQuery = __webpack_require__(32923);
// EXTERNAL MODULE: ./node_modules/axios/lib/axios.js + 48 modules
var axios = __webpack_require__(54997);
;// CONCATENATED MODULE: ./app/(dashboard)/(route)/customer/_components/Data.tsx









const { Option } = lib_select["default"];
let accessToken;
if (false) {}
const fetchPackages = async ()=>{
    const response = await axios/* default */.Z.get("https://admin.plenti.africa/api/v1/user/bills/dataplan-operators", {
        headers: {
            Authorization: `Bearer ${accessToken}`
        }
    });
    return response.data.data;
};
const optionsWithImages = [
    {
        value: "GLO",
        label: "GLO",
        image: customerImages/* glo */.js
    },
    {
        value: "MTN",
        label: "MTN",
        image: customerImages/* mtn */.St
    },
    {
        value: "AIRTEL",
        label: "AIRTEL",
        image: customerImages/* airtel */.CF
    },
    {
        value: "9MOBILE",
        label: "9MOBILE",
        image: customerImages/* etisalat */.hE
    }
];
const Data = ()=>{
    const [selectedDuration, setSelectedDuration] = (0,react_.useState)("daily");
    const [selectedValue, setSelectedValue] = (0,react_.useState)({
        amount: "",
        mobile: "",
        dataplan: "",
        network: "",
        reward: 1,
        paymentcode: "",
        showNetworkSelect: false,
        showPackageSelect: false,
        showAmountField: false
    });
    const { data: packages, isLoading } = (0,useQuery/* useQuery */.a)({
        queryFn: ()=>fetchPackages(),
        queryKey: [
            "packages"
        ]
    });
    console.log(packages);
    const determineNetwork = (mobileNumber)=>{
        const prefix = mobileNumber.substring(0, 4);
        if ([
            "0703",
            "0706",
            "0803",
            "0806",
            "0810",
            "0813",
            "0816",
            "0814",
            "0903",
            "0906",
            "0913",
            "0916",
            "0704"
        ].includes(prefix)) {
            return "MTN";
        } else if ([
            "0815",
            "0811",
            "0805",
            "0807",
            "0705",
            "0905",
            "0915"
        ].includes(prefix)) {
            return "GLO";
        } else if ([
            "0701",
            "0708",
            "0812",
            "0802",
            "0808",
            "0902",
            "0901",
            "0904",
            "0907",
            "0912"
        ].includes(prefix)) {
            return "AIRTEL";
        } else if ([
            "0809",
            "0818",
            "0817",
            "0909",
            "0908"
        ].includes(prefix)) {
            return "9MOBILE";
        } else {
            return "";
        }
    };
    (0,react_.useEffect)(()=>{
        const network = determineNetwork(selectedValue.mobile);
        if (selectedValue.mobile.length >= 10) {
            setSelectedValue((prev)=>({
                    ...prev,
                    network,
                    showNetworkSelect: true,
                    showPackageSelect: true
                }));
        } else if (selectedValue.showPackageSelect) {
            setSelectedValue((prev)=>({
                    ...prev
                }));
        } else {
            setSelectedValue((prev)=>({
                    ...prev,
                    showNetworkSelect: false,
                    showPackageSelect: false
                }));
        }
    }, [
        selectedValue.mobile
    ]);
    const handleNetworkChange = (value)=>{
        setSelectedValue((prev)=>({
                ...prev,
                network: value,
                showPackageSelect: true
            }));
    };
    const handleDurationClick = (duration)=>{
        setSelectedDuration(duration);
    };
    const filteredPackages = packages?.filter((p)=>{
        const durationCondition = selectedDuration === "daily" ? "1 day" : selectedDuration === "weekly" ? "7 days" : "30 days";
        return p.data_options_desc?.includes(durationCondition);
    });
    const extractDataAmount = (description)=>{
        const match = description.match(/(\d+)(?:MB|GB)/i);
        return match ? match[0] : "";
    };
    const handleChange = (e)=>{
        const { name, value } = e.target ? e.target : {
            name: e.name,
            value: e.value
        };
        setSelectedValue((prev)=>({
                ...prev,
                [name]: value
            }));
        if (name === "dataplan" && value) {
            setSelectedValue((prev)=>({
                    ...prev,
                    showAmountField: true
                }));
        }
        if (e.name === "dataplan") {
            const selectedPackage = packages.find((p)=>p.data_options_desc.includes(e.value));
            if (selectedPackage) {
                setSelectedValue((prev)=>({
                        ...prev,
                        amount: selectedPackage.amount,
                        paymentcode: selectedPackage.payment_code.trim(),
                        showAmountField: true
                    }));
            }
        }
        console.log(selectedValue);
    };
    const url = process.env.NEXT_PUBLIC_BASE_URL;
    const postRequest = (0,usepostRequest/* default */.Z)();
    const { mutate, isError, error, isPending } = postRequest(`${url}/user/bills/buy-data`, (responseData)=>{
        sweetalert2_all_default().fire({
            title: "Success!",
            text: `Data purchase of ${selectedValue.amount} was successful.`,
            icon: "success",
            showClass: {
                popup: `
            animate__animated
            animate__fadeInUp
            animate__faster
          `
            },
            hideClass: {
                popup: `
            animate__animated
            animate__fadeOutDown
            animate__faster
          `
            }
        });
        setSelectedValue({
            amount: "",
            mobile: "",
            dataplan: "",
            network: "",
            reward: 1,
            paymentcode: "",
            showNetworkSelect: false,
            showPackageSelect: false,
            showAmountField: false
        });
        console.log(responseData);
    }, (error)=>{
        sweetalert2_all_default().fire({
            icon: "error",
            title: "Oops...",
            text: "Something went wrong!"
        });
        console.error(error);
    });
    const handleSubmit = (e)=>{
        e.preventDefault();
        mutate(selectedValue);
        console.log(selectedValue);
    };
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
        children: [
            isPending && /*#__PURE__*/ jsx_runtime_.jsx(loading/* default */.Z, {}),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                className: "flex justify-around p-[2rem]",
                children: [
                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                        className: "cursor-pointer",
                        onClick: ()=>handleDurationClick("daily"),
                        children: "Daily"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                        className: "cursor-pointer",
                        onClick: ()=>handleDurationClick("weekly"),
                        children: "Weekly"
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                        className: "cursor-pointer",
                        onClick: ()=>handleDurationClick("monthly"),
                        children: "Monthly"
                    })
                ]
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "grid md:grid-cols-5 grid-cols-4 gap-8",
                children: filteredPackages?.map((data, index)=>{
                    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: "bg-[#F8F8F8] rounded-[12px] max-md:w-[75px]  flex items-center justify-between md:min-w-[130px] flex-col",
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("p", {
                                className: "bg-[#FCF0EB] text-[#FF6F33] max-md:text-[10px] text-center p-[0.5rem] rounded-t-[12px] w-full",
                                children: [
                                    " ",
                                    selectedDuration.charAt(0).toUpperCase() + selectedDuration.slice(1),
                                    " ",
                                    "Plan"
                                ]
                            }),
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                        className: "md:p-[1rem] p-[0.5rem] max-md:text-[12px]",
                                        children: extractDataAmount(data.data_options_desc)
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("p", {
                                        className: "text-[#ED4249] px-[1rem] max-md:text-[10px] pb-[1.2rem]",
                                        children: data.operator
                                    })
                                ]
                            })
                        ]
                    }, index);
                })
            }),
            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("form", {
                action: "",
                onSubmit: handleSubmit,
                children: [
                    /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
                        className: "form-control w-full  my-[3rem]",
                        children: [
                            /*#__PURE__*/ (0,jsx_runtime_.jsxs)("label", {
                                className: "label",
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                        className: "label-text",
                                        children: "Phone Number"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                        className: "label-text-alt text-[#ED4249]",
                                        children: "100 points"
                                    })
                                ]
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                type: "text",
                                placeholder: "Type here",
                                className: "input input-bordered w-full bg-[#F3F3F3] text-[#A09F9F] ",
                                name: "mobile",
                                value: selectedValue.mobile,
                                onChange: handleChange
                            }),
                            selectedValue.showNetworkSelect && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("figure", {
                                className: "my-[1rem]",
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                        className: "label-text",
                                        children: "Network"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(lib_select["default"], {
                                        value: selectedValue.network,
                                        className: "bg-[#F3F3F3] w-full cursor-pointer h-[45px]",
                                        onChange: handleNetworkChange,
                                        children: optionsWithImages.map((option)=>/*#__PURE__*/ jsx_runtime_.jsx(Option, {
                                                value: option.value,
                                                className: "bg-[#F3F3F3]",
                                                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("li", {
                                                    className: "flex items-center bg-[#F3F3F3] text-[17px]",
                                                    children: [
                                                        /*#__PURE__*/ jsx_runtime_.jsx("img", {
                                                            src: option.image.src,
                                                            alt: option.label,
                                                            className: "w-[35px] px-[10px]"
                                                        }),
                                                        option.label
                                                    ]
                                                })
                                            }, option.value))
                                    })
                                ]
                            }),
                            /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                type: "hidden",
                                name: "paymentcode",
                                value: selectedValue.paymentcode
                            }),
                            selectedValue.showPackageSelect && /*#__PURE__*/ (0,jsx_runtime_.jsxs)("figure", {
                                className: "my-[1rem]",
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                        className: "label-text",
                                        children: "Package"
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx(lib_select["default"], {
                                        value: selectedValue.dataplan,
                                        className: "w-full h-[45px]",
                                        onChange: (value)=>handleChange({
                                                name: "dataplan",
                                                value
                                            }),
                                        children: packages.filter((p)=>p.operator.trim() === selectedValue.network).map((p)=>/*#__PURE__*/ jsx_runtime_.jsx(Option, {
                                                value: p.data_options_desc,
                                                children: p.data_options_desc
                                            }, p.id))
                                    })
                                ]
                            }),
                            selectedValue.showAmountField && /*#__PURE__*/ (0,jsx_runtime_.jsxs)(jsx_runtime_.Fragment, {
                                children: [
                                    /*#__PURE__*/ jsx_runtime_.jsx("label", {
                                        className: "label",
                                        children: /*#__PURE__*/ jsx_runtime_.jsx("span", {
                                            className: "label-text block",
                                            children: "Amount"
                                        })
                                    }),
                                    /*#__PURE__*/ jsx_runtime_.jsx("input", {
                                        type: "text",
                                        className: "input input-bordered w-full bg-[#F3F3F3] text-[#A09F9F] block ",
                                        name: "amount",
                                        value: selectedValue.amount,
                                        onChange: handleChange
                                    })
                                ]
                            })
                        ]
                    }),
                    /*#__PURE__*/ jsx_runtime_.jsx("button", {
                        type: "submit",
                        className: "bg-red-600 bg-red-500 text-white w-[90%] m-auto my-[1rem] block  text-grey-600 hover:bg-gray-700 hover:text-white text-left py-2 px-4 rounded-full flex items-center justify-center w-64",
                        children: "submit"
                    })
                ]
            })
        ]
    });
};
/* harmony default export */ const _components_Data = (Data);

// EXTERNAL MODULE: ./app/(dashboard)/(route)/customer/_components/Tabs.tsx + 1 modules
var Tabs = __webpack_require__(78251);
;// CONCATENATED MODULE: ./app/(dashboard)/(route)/customer/category/otherservices/Airtime/page.tsx
/* __next_internal_client_entry_do_not_use__ default auto */ 




const Page = ()=>{
    return /*#__PURE__*/ (0,jsx_runtime_.jsxs)("div", {
        children: [
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "text-sm breadcrumbs m-[1rem]",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)("ul", {
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx("li", {
                            children: "Other Services"
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("li", {
                            children: "Airtime"
                        })
                    ]
                })
            }),
            /*#__PURE__*/ jsx_runtime_.jsx("div", {
                className: "md:p-4 p-2",
                children: /*#__PURE__*/ (0,jsx_runtime_.jsxs)(Tabs/* default */.Z, {
                    tabData: [
                        {
                            label: "Buy Airtime"
                        },
                        {
                            label: "Buy Data Bundles "
                        }
                    ],
                    children: [
                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            children: /*#__PURE__*/ jsx_runtime_.jsx(_components_Airtime, {})
                        }),
                        /*#__PURE__*/ jsx_runtime_.jsx("div", {
                            children: /*#__PURE__*/ jsx_runtime_.jsx(_components_Data, {})
                        })
                    ]
                })
            })
        ]
    });
};
/* harmony default export */ const page = (Page);


/***/ }),

/***/ 23209:
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(61363);

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`C:\wamp64\www\plenty\plenti-web\app\(dashboard)\(route)\customer\category\otherservices\Airtime\page.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, [2697,9792,1440,229,5386,6172,4521,2273,5879,2923,2696,2003,3214,951,1393,2972,6865,8251,664,4017], () => (__webpack_exec__(16551)));
module.exports = __webpack_exports__;

})();